<!DOCTYPE html>
<html>
<head>
<script>
(function(eve, undefined) {
	var pathname=window.location.pathname;
	var path="/account/log-in";
	if (pathname!==path) {
		window.history.replaceState(null, null, path+window.location.search+window.location.hash);
	}
})(eve=window.eve||{});
</script>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=3, user-scalable=yes"/>
	<meta name="keywords" content="Recoeve.net"/>
	<!-- <link rel="stylesheet" media="all" type="text/css" href="./log-in.css"/> -->
<style>
* {-webkit-box-sizing:border-box; -moz-box-sizing:border-box; box-sizing:border-box}
body {width:100%; max-width:1000px; margin:0 auto; padding:5px 0}
.recoeve-container {font-size:10px; line-height:1.5; padding:0 .7em; font-family:'Malgun Gothic', '맑은 고딕', 나눔고딕, NanumGothic, 'MS Mincho', Tahoma, Sans-serif; background:rgb(40,40,55); color:white}
h1 {display:block; font:inherit; font-size:3em; font-weight:bold; margin:0 0 .5em; padding:.6em .5em; border-bottom:5px solid rgb(140,140,150)}
.form-login {width:20em; max-width:100%; margin:0 auto 1em; padding:1em; font-size:16px; color:white; line-height:1; background:black; border:3px solid rgb(120,120,130)}
.form-login>h2 {margin:0 0 1em; font:inherit; font-size:1.3em; line-height:1.3; font-weight:bold}
.form-login>label {display:block; color:white; font-size:1em; font-weight:bold; margin:.9em 0 .4em}
.form-login>label:first-of-type {margin-top:0}
.form-login>label.checkbox {font-weight:normal}
.form-login>input {display:block; width:100%; height:auto; overflow:hidden; padding:.3em .5em; font-family:inherit; font-weight:normal; font-size:1em; line-height:1.5; background:white; color:rgb(50,50,50)}
.form-login>input:focus {background:rgb(240,240,255)}
.form-login>button {width:100%; font:inherit; font-weight:bold; padding:.5em; text-align:center; margin-top:1.3em} .form-login>button:disabled {background:rgb(70,70,70)}
.form-login>.error-msg {border:1px solid gray; padding:.3em .5em; margin:.5em 0 0; color:rgb(255,200,200); line-height:1.3}

.desc {font-size:1.7em; padding:.5em}
data {display:none}
.lang {font-size:1.6em; padding:.5em}
.p {padding-bottom:1em}
.bold {font-weight:bold}
.reco {color:rgb(200,130,130)}
.eve {color:rgb(130,130,200)}

a {text-decoration:none}
a:link {color:rgb(190,190,235)}
a:visited {color:rgb(170,170,215)}
a:active {color:rgb(100,215,215)}
a:hover {color:rgb(170,215,170); text-decoration:underline}

#foot {clear:both; border-top:2px solid white; padding:1em .5em; font-size:1.5em;}

@media all and (min-width:640px) {
	.form-login {margin:0 .6em 1em 1em; float:right; clear:right}
}
</style>
	<title>Recoeve.net</title>
</head>
<body>
<div class="recoeve-container">
<h1>[--welcome--]</h1>

<form class="form-login">
<!-- <h2>Sign in</h2> -->
	<input type="hidden" name="idType" value="id" id="input-idType"/>
	<label for="userId">[--ID--] or [--E-mail--]</label>
	<input class="user-id go-next" name="userId" id="input-userId" value="" placeholder="[--ID--] or [--E-mail--]" type="text" maxlength="50" tabindex="1"/>
	<label for="userPwd">[--Password--]</label>
	<input class="user-pwd" name="userPwd" id="log-in-userPwd" value="" placeholder="[--Password--]" type="password" maxlength="100" tabindex="2"/>
	<label class="checkbox"><input name="rememberMe" class="checkbox" value="yes" type="checkbox" tabindex="3"/> <span>[--Remember me--]</span></label><!-- checked="checked" -->
	<!-- <div>Forgot password?</div> -->
	<button id="button-log-in" type="button" onclick="eve.logIn(this)" tabindex="4">[--Log in--]</button>
</form>

<form class="form-login" action="./sign-up" accept-charset="UTF-8" method="post">
<h2>[--Sign up for Recoeve--]</h2>
	<label for="userId">[--ID--]</label>
	<input class="user-id go-next" name="userId" value="" placeholder="[--ID--]" type="text" maxlength="21" tabindex="5"/>
	<label for="userEmail">[--E-mail--]</label>
	<input class="user-Email go-next" name="userEmail" value="" placeholder="[--E-mail--]" type="text" maxlength="50" tabindex="6"/>
	<label for="userPwd">[--Password--]</label>
	<input class="user-pwd go-next" name="userPwd" value="" placeholder="[--Password--]" type="password" maxlength="64" tabindex="7"/>
	<label for="userPwdCfm">[--Password confirm--]</label>
	<input class="user-pwd" name="userPwdCfm" id="sign-up-userPwdCfm" value="" placeholder="[--Password confirm--]" type="password" maxlength="100" tabindex="8"/>
	<button id="button-sign-up" type="button" onclick="eve.signUp(this)" tabindex="9">[--Sign up for Recoeve--]</button>
</form>

<div class="desc">
[--desc--]
</div>

<div class="lang">
	<div class="p">Language/언어/語言</div>
<data id="data-lang">en	ko	ja	zh
English/영어/en	Korean/한국어/ko	Japanese/일본어/ja	Chinese/중국어(번체)/zh</data>
</div>

<div id="foot">[--version--] [--foot--]<br><a href="http://kipid.tistory.com/entry/Introducing-what-we-are-making-Recoevenet">Introducing what we are making : Recoeve.net</a></div>
</div><!-- recoeve-container -->

<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script> -->
<script src="/jquery.min.js"></script>
<script>
(function(eve, $, undefined) {
$(".replace-reco-eve").html(function(i, orgHtml) {
	return orgHtml
		.replace(/reco/ig,'<span class="reco bold">$&</span>')
		.replace(/eve/ig,'<span class="eve bold">$&</span>');
});

//////////////////////////////////////////
// path.search rendering
//////////////////////////////////////////
eve.getSearchVars=function() {
	var searchStr=window.location.search;
	var vars={};
	if (searchStr!==0) {
		if (searchStr.substring(0,1)==="?") {
			searchStr=searchStr.substring(1);
		}
		var splits=searchStr.split("&");
		for (var i=0;i<splits.length;i++) {
			var key=splits[i];
			var value="";
			var k=splits[i].indexOf("=");
			if (k!==-1) {
				key=splits[i].substring(0,k);
				value=decodeURIComponent(splits[i].substring(k+1));
			}
			vars[key]=value;
		}
	}
	return vars;
};

/*  :: cookies.js :: Slightly edited by kipid at 2014-09-03.
|*|
|*|  A complete cookies reader/writer framework with full unicode support.
|*|
|*|  https://developer.mozilla.org/en-US/docs/DOM/document.cookie
|*|
|*|  This framework is released under the GNU Public License, version 3 or later.
|*|  http://www.gnu.org/licenses/gpl-3.0-standalone.html
|*|
|*|  Syntaxes:
|*|
|*|  * docCookies.setItem(name, value[, end[, path[, domain[, secure]]]])
|*|  * docCookies.getItem(name)
|*|  * docCookies.removeItem(name[, path], domain)
|*|  * docCookies.hasItem(name)
|*|  * docCookies.keys()
*/
eve.docCookies={
  getItem: function (sKey) {
    return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g, "\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"), "$1")) || null;
  },
  setItem: function (sKey, sValue, vEnd, sPath, sDomain, bSecure) {
    if (!sKey || /^(?:expires|max\-age|path|domain|secure)$/i.test(sKey)) { return false; }
    var sExpires = "";
    if (vEnd) {
      switch (vEnd.constructor) {
        case Number:
          sExpires = vEnd === Infinity ? "; expires=Fri, 31 Dec 9999 23:59:59 GMT" : "; max-age="+vEnd;
          break;
        case String:
          sExpires = "; expires="+vEnd;
          break;
        case Date:
          sExpires = "; expires="+vEnd.toUTCString();
          break;
      }
    }
    document.cookie = encodeURIComponent(sKey)+"="+encodeURIComponent(sValue) + sExpires + (sDomain ? "; domain="+sDomain : "") + (sPath ? "; path="+sPath : "") + (bSecure ? "; secure" : "");
    return true;
  },
  removeItem: function (sKey, sPath, sDomain, bSecure) {
    if (!sKey || /^(?:expires|max\-age|path|domain|secure)$/i.test(sKey)/* || !this.hasItem(sKey)*/) { return false; }
    document.cookie = encodeURIComponent(sKey)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT" + (sDomain ? "; domain="+sDomain : "") + (sPath ? "; path="+sPath : "") + (bSecure ? "; secure" : "");
    return true;
  },
  hasItem: function (sKey) {
    return (new RegExp("(?:^|;\\s*)"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g, "\\$&")+"\\s*\\=")).test(document.cookie);
  },
  keys: /* optional method: you can safely remove it! */ function () {
    var aKeys = document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g, "").split(/\s*(?:\=[^;]*)?;\s*/);
    for (var nIdx = 0; nIdx < aKeys.length; nIdx++) { aKeys[nIdx] = decodeURIComponent(aKeys[nIdx]); }
    return aKeys;
  }
};
var vars=eve.getSearchVars();
if (vars.lang!==undefined) {
	eve.docCookies.setItem("lang", vars.lang, Infinity, "/");
}

////////////////////////////////////////////////////
// String to Array (copied from user-page.html)
////////////////////////////////////////////////////
eve.encloseStr=function(str) {
	if (str===undefined||str===null||str.constructor!==String) { return ""; }
	if (str.charAt(0)==="\""||/[\n\t]/.test(str)) {
		return '"'+str.replace(/"/g,'""')+'"';
	} else {
		return str;
	}
};
eve.strToJSON=function(str='', colMap=true, rowMap=false) {
	if (str===undefined||str===null||str.constructor!==String) { return []; }
	if (colMap===undefined||colMap===null) { colMap=true; }
	// str=str.trim()+"\n";
	if (str.charAt(str.length-1)!=="\n") {
		str+="\n";
	}
	var ret=[];
	var delimiter=/([^\t\n]*)([\t\n])/g;
	var lastQuote=/[^"](?:"")*"([\t\n])/g;
	var exec;
	var start=0;
	var row=-1, col=-1, delim="\n";
	var strElem="";
	function increseRC(str) {
		if (str==='\t') {
			col++; return true;
		} else if (str==='\n') {
			row++; col=0; ret.push([]); return true;
		} return false;
	}
	while (start<str.length&&increseRC(delim)) {
		if ((str.substring(start, start+1))==='"') {
			lastQuote.lastIndex=start+1;
			if ((exec=lastQuote.exec(str))!==null) {
				strElem=str.substring(start+1, lastQuote.lastIndex-2);
				delim=exec[1];
				start=delimiter.lastIndex=lastQuote.lastIndex;
			} else {
				strElem=str.substring(start+1);
				delim="";
				start=str.length;
			}
			strElem=strElem.replace(/""/g,'"');
		} else {
			if ((exec=delimiter.exec(str))!==null) {
				strElem=exec[1];
				delim=exec[2];
				start=delimiter.lastIndex;
			} else {
				strElem=str.substring(start);
				delim="";
				start=str.length;
			}
		}
		ret[row][col]=strElem;
	}
	if (colMap) {
		var firstColSize=ret[0].length;
		for (var i=0;i<ret.length;i++) {
			var jMax=ret[i].length;
			if (jMax>firstColSize) { jMax=firstColSize; }
			for (var j=0;j<jMax;j++) {
				var key=ret[0][j];
				if (key!==undefined) {
					ret[i][key]=ret[i][j];
				}
			}
		}
	}
	if (rowMap) {
		for (var i=0;i<ret.length;i++) {
			var key=ret[i][0];
			if (key!==undefined) {
				ret[key]=ret[i];
			}
		}
	}
	return ret;
};

var $dataLang=$("#data-lang");
var dataLang=eve.strToJSON( $dataLang.html().trim() );
var href=window.location.href.replace(/\?\S*$/, "")+"?lang=";
var htmlLang='<div class="p">';
for (var i=0;i<dataLang[0].length;i++) {
	htmlLang+='<a href="'+href+dataLang[0][i]+'">'+dataLang[1][i]+'</a><br>';
}
htmlLang+='</div>';
$dataLang.after(htmlLang);

//////////////////////////////////////////////////////////
// Form handling. (Validity check, encrypt, and submit)
//////////////////////////////////////////////////////////
var sW=screen.width;
var sH=screen.height;
if (sW<sH) {
	sW=screen.height;
	sH=screen.width;
}

eve.encloseErr=function(msg) {
	return '<div class="error-msg">'+msg+'</div>';
};
eve.byteCount=function(str) {
	return encodeURI(str).split(/%..|./).length-1;
};
eve.pad=function(str, max) {
	str=str.toString();
	return (str.length<max)?eve.pad("0"+str,max):str;
};
eve.hash1=function(str) {
	var h=-17-str.length;
	for (var i=0;i<str.length;i++) {
		h+=str.charCodeAt(i);
		h+=(h<<10);
		h^=(h>>>6);
	}
	h+=(((h>>>0)%1318489)<<7);
		// prime from http://www.gutenberg.org/cache/epub/65/pg65.html.utf8
	h+=(h<<3);
	h^=(h>>>11);
	h+=(h<<15);
	h=h>>>0;
	return eve.pad(h.toString(16), 8);
};
eve.hash2=function(str) {
	var h=str.length+1;
	var tmp;
	for (var i=0;i<str.length;i++) {
		h+=str.charCodeAt(i);
		tmp=(str.charCodeAt(str.length-1-i)<<11)^h;
		h+=(h<<16)^tmp;
		h^=(h>>>7);
		h+=(h<<11);
	}
	h+=( ((h>>>0)%918679)<<11 );
		// prime from http://www.gutenberg.org/cache/epub/65/pg65.html.utf8
	h^=h<<3;
	h+=h>>>5;
	h^=h<<4;
	h+=h>>>17;
	h^=h<<25;
	h+=h>>>6;
	h=h>>>0;
	return eve.pad(h.toString(16), 8);
};
eve.hash3=function(str) {
	var h=-1023+str.length;
	for (var i=0;i<str.length;i++) {
		h^=(h<<5)+(h>>>2)+str.charCodeAt(i);
	}
	h^=h<<15;
	h+=h<<15;
	h+=( ((h>>>0)%1299451)<<2 );
	h=h>>>0;
	return eve.pad(h.toString(16), 8);
};
eve.hash4=function(str) {/* RS Hash Function */
	var b=378551;
	var a=63689;
	var h=0;
	for (var i=0;i<str.length;i++) {
		var q=0;
		for (var j=0;j<32;j++) {
			if (a&(1<<j)) {
				q=(q+(h<<j))>>>0;
			}
		}
		h=(q+str.charCodeAt(i))>>>0;
			// h=h*a+str.charCodeAt(i);
		q=0;
		for (var j=0;j<32;j++) {
			if (b&(1<<j)) {
				q=(q+(a<<j))>>>0;
			}
		}
		a=q; // a=a*b;
	}
	return eve.pad(h.toString(16), 8);
};
eve.hash5=function(str) {/* JS Hash Function */
	var h=1315423911;
	for (var i=0;i<str.length;i++) {
		h^=((h<<5)+str.charCodeAt(i)+(h>>2))>>>0;
	}
	h=h>>>0;
	return eve.pad(h.toString(16), 8);
};
eve.hash6=function(str) {/* ELF Hash Function */
	var h=0;
	var x=0;
	for (var i=0;i<str.length;i++) {
		h=((h<<4)+str.charCodeAt(i))>>>0;
		if ((x=h&0xf0000000)!=0) {
			h^=(x>>24);
		}
		h&=~x;
	}
	h=h>>>0;
	return eve.pad(h.toString(16), 8);
};
eve.hash7=function(str) {/* BKDR Hash Function */
	var a=131; // 31 131 1313 13131 131313 etc..
	var h=0;
	for (var i=0;i<str.length;i++) {
		var q=0;
		for (var j=0;j<32;j++) {
			if (a&(1<<j)) {
				q=(q+(h<<j))>>>0;
			}
		}
		h=(q+str.charCodeAt(i))>>>0;
			// h=h*a+str.charCodeAt(i);
	}
	return eve.pad(h.toString(16), 8);
};
eve.hash8=function(str) {/* SDBM Hash Function */
	var h=0;
	for (var i=0;i<str.length;i++) {
		h=(str.charCodeAt(i)+(h<<6)+(h<<16)-h)>>>0;
	}
	return eve.pad(h.toString(16), 8);
};
eve.hash9=function(str) {/* DJB Hash Function */
	var h=5381;
	for (var i=0;i<str.length;i++) {
		h=(((h<<5)+h)+str.charCodeAt(i))>>>0;
	}
	return eve.pad(h.toString(16), 8);
};
eve.hash10=function(str) {/* DEK Hash Function */
	var h=str.length;
	for (var i=0;i<str.length;i++) {
		h=((h<<5)^(h>>27))^str.charCodeAt(i);
	}
	h=h>>>0;
	return eve.pad(h.toString(16), 8);
};
eve.hash11=function(str) {/* BP Hash Function */
	var h=0;
	for (var i=0;i<str.length;i++) {
		h=h<<7^str.charCodeAt(i);
	}
	h=h>>>0;
	return eve.pad(h.toString(16), 8);
};
eve.hash12=function(str) {/* FNV Hash Function */
	var a=0x811C9DC5;
	var h=0;
	for (var i=0;i<str.length;i++) {
		var q=0;
		for (var j=0;j<32;j++) {
			if (a&(1<<j)) {
				q=(q+(h<<j))>>>0;
			}
		}
		h=q>>>0;
			// h=h*a;
		h^=str.charCodeAt(i);
	}
	h=h>>>0;
	return eve.pad(h.toString(16), 8);
};
eve.hash13=function(str) {/* AP Hash Function */
	var h=0xAAAAAAAA;
	for(var i=0;i<str.length;i++) {
		if ((i&1)==0) {
			h^=((h<<7)^str.charCodeAt(i)*(h>>3));
		} else {
			h^=(~((h<<11)+str.charCodeAt(i)^(h>>5)));
		}
	}
	h=h>>>0;
	return eve.pad(h.toString(16), 8);
};
eve.encrypt=function(salt, pwd, iter) {
	iter=pwd.length+131+((iter&&iter.constructor==Number&&iter>=0)?iter:0);;
	pwd=salt+pwd;
	var h1=eve.hash1(pwd);
	var h2=eve.hash2(pwd);
	var h3=eve.hash3(pwd);
	var h4=eve.hash4(pwd);
	var h5=eve.hash5(pwd);
	var h6=eve.hash6(pwd);
	var h7=eve.hash7(pwd);
	var h8=eve.hash8(pwd);
	var h9=eve.hash9(pwd);
	var h10=eve.hash10(pwd);
	var h11=eve.hash11(pwd);
	var h12=eve.hash12(pwd);
	var h13=eve.hash13(pwd);
	var tmp1, tmp2, tmp3, tmp4, tmp5, tmp6, tmp7, tmp8, tmp9, tmp10, tmp11, tmp12, tmp13;
	for (var i=0;i<iter;i++) {
		tmp1=h13+h12+h11+h10+h9+salt+h8+h7+h6+h5+h4+h3+h2+h1;
		tmp2=h1+h3+salt+h2;
		tmp3=salt+h2+h8+h1+h3;
		tmp4=h7+salt+h5;
		tmp5=h4+salt+h8;
		tmp6=h10+h13+salt+h6;
		tmp7=h6+h1+h9+salt;
		tmp8=h9+salt+h10;
		tmp9=h7+salt+h12;
		tmp10=h11+salt+h5;
		tmp11=h4+salt+h13+h2;
		tmp12=h11+salt+h6;
		tmp13=h4+h12+salt+h8;
		h1=eve.hash1(tmp1);
		h2=eve.hash2(tmp2);
		h3=eve.hash3(tmp3);
		h4=eve.hash4(tmp4);
		h5=eve.hash5(tmp5);
		h6=eve.hash6(tmp6);
		h7=eve.hash7(tmp7);
		h8=eve.hash8(tmp8);
		h9=eve.hash9(tmp9);
		h10=eve.hash10(tmp10);
		h11=eve.hash11(tmp11);
		h12=eve.hash12(tmp12);
		h13=eve.hash13(tmp13);
	}
	return h1+h2+h3+h4+h5+h6+h7+h8+h9+h10+h11+h12+h13;
};
eve.iterFull=10000;
// var salt="14d95b54b8ac93af5891cca6fd09e81346fca2de72cfc4f2fa519b32ae4e41e720c2b70087d9775a8cb85bb756f2cc8bcbcb24d0";
// console.log("encrypt('Ef!%qKd3$2b') : "+eve.encrypt(salt, "Ef!%qKd3$2b",eve.iterFull));
// console.log("encrypt('3s9dkf@Q)34WKZ,e') : "+eve.encrypt(salt, "3s9dkf@Q)34WKZ,e",eve.iterFull));
// console.log("encrypt('c,DksEI%@8WE^% sq') : "+eve.encrypt(salt, "c,DksEI%@8WE^% sq",eve.iterFull));
// console.log("encrypt(' a528wdf329') : "+eve.encrypt(salt, " a528wdf329",eve.iterFull));
// console.log("encrypt('347958416') : "+eve.encrypt(salt, "347958416",eve.iterFull));

eve.regExId=/^[a-zA-Z가-힣0-9-_.]+$/;
eve.regExEmail=/^[a-zA-Z0-9-_.]+@[a-zA-Z0-9-_.]+$/;
eve.minIdLength=3;
eve.maxIdLength=21;
eve.minPwdLength=7;
eve.maxPwdLength=64;

eve.logIn=function(elem) {
	var $elem=$(elem).eq(0);
	$elem[0].disabled=true;
	var $form=$elem.parent("form").eq(0);
	var idType="id";
	var userId=$form.find(".user-id")[0].value;
	var userIdLength=eve.byteCount(userId);
	var userPwd=$form.find(".user-pwd")[0].value;
	var err="";
	var valid=false;
	
	if (userIdLength==0) {
		err+="[--ID or E-mail is empty.--]";
	} else if (userIdLength<eve.minIdLength) {
		err+="[--ID or E-mail is too short.--]";
	} else if (userPwd.length==0) {
		err+="[--Password is empty.--]";
	} else if (userPwd.length<eve.minPwdLength) {
		err+="[--Password is too short.--]";
	} else {
		if (eve.regExId.test(userId)) {
			$form.find("#input-idType")[0].value=idType="id"; valid=true;
		} else if (eve.regExEmail.test(userId)) {
			$form.find("#input-idType")[0].value=idType="email"; valid=true;
		} else {
			err+="[--ID--]/[--E-mail--] '"+userId+"' [--is of invalid form.--]";
		}
	}
	
	if (valid) {
		var form_data="log\tiehack\tscreenWidth\tscreenHeight\tidType\tuserId\trememberMe\tuserPwd\n"
			+"web\t&#9760;\t"+sW+"\t"+sH+"\t"+idType+"\t"+userId+"\t"+($("input:checkbox[name='rememberMe']").is(":checked")?"yes":"no")+"\t";
		$elem.before( eve.encloseErr("[--Checking ID/E-mail--] : [--Please wait.--]") );
		$.ajax("./pwd_iteration", {
			type: "POST"
			, data: idType+"\t"+userId
		}).fail(function() {
			$elem.before( eve.encloseErr("[--Request times out.--] [--Please click the Log-in button again.--]") );
			$elem[0].disabled=false;
		}).done(function(resp) { // resp: pwd_iteration or "No such id"	salt
			var res=resp.split('\t');
			var iter=Number(res[0]);
			if (isNaN(iter)) {
				$elem.before( eve.encloseErr("Error : "+res[0]) );
				$elem[0].disabled=false;
			} else {
				$elem.before( eve.encloseErr("[--Password is being encrypted.--]") );
				setTimeout(function() {
					form_data+=eve.encrypt(res[1], userPwd, iter); userPwd="";
					$elem.before( eve.encloseErr("[--Logging in--] : [--Please wait.--]") );
					$.ajax("./log-in.do", {
						type: "POST"
						, data: form_data
					}).done((resp) => {
						$elem.before( eve.encloseErr(resp) );
						if (resp==="log-in success") {
							window.location.pathname="/";
						} else {
							$elem[0].disabled=false;
						}
					});
				}, 500);
			}
		});
	} else {
		$elem.before( eve.encloseErr(err) );
		$elem[0].disabled=false;
	}
	var errorMsgs=$form.find(".error-msg");
	for (var i=errorMsgs.length-6;i>=0;i--) {
		errorMsgs.eq(i).css({display:"none"});
	};
};

eve.signUp=function(elem) {
	var $elem=$(elem).eq(0);
	$elem[0].disabled=true;
	var $form=$elem.parent("form").eq(0);
	var userId=$form.find(".user-id")[0].value;
	var userIdLength=eve.byteCount(userId);
	var userEmail=$form.find(".user-Email")[0].value;
	var userPwd=$form.find(".user-pwd")[0].value;
	var userPwdCfm=$form.find(".user-pwd")[1].value;
	var err="";
	var valid=false;
	
	if (userIdLength==0) {
		err+="[--ID is empty.--]";
	} else if (userIdLength<eve.minIdLength||userIdLength>eve.maxIdLength) {
		err+=(userIdLength<eve.minIdLength?"[--ID is too short.--]":"[--ID is too long.--]")+" '"+userId+"':"+userIdLength+" ([--ID--].[--length--]:"+eve.minIdLength+"~"+eve.maxIdLength+")";
	} else if (!eve.regExId.test(userId)) {
		err+="[--ID--] '"+userId+"' [--is of invalid form.--]";
	} else if (userEmail.length==0) {
		err+="[--E-mail is empty.--]";
	} else if (!eve.regExEmail.test(userEmail)) {
		err+="[--E-mail--] '"+userEmail+"' [--is of invalid form.--]";
	} else if (userPwd.length==0) {
		err+="[--Password is empty.--]";
	} else if (userPwd.length<eve.minPwdLength||userPwd.length>eve.maxPwdLength) {
		err+=(userPwd.length<eve.minPwdLength?"[--Password is too short.--]":"[--Password is too long.--]")+" ([--Password--].[--length--]:"+eve.minPwdLength+"~"+eve.maxPwdLength+")";
	} else if (userPwd!==userPwdCfm) {
		err+="[--Confirm your password correctly.--]";
	} else {
		valid=true;
	}
	
	if (valid) {
		$elem.before( eve.encloseErr("[--Checking ID and E-mail--] : [--Please wait.--]") );
		$.ajax("./check", {
			type: "POST"
			, data: userId+"\t"+userEmail
		}).fail(function() {
			$elem.before( eve.encloseErr("[--Request time out.--] [--Please click the Sign-up button again.--]") );
			$elem[0].disabled=false;
		}).done(function(resp) { // resp: idAvailable	emailAvailable	tToken	authToken(char(64))
			var res=resp.split('\t');
			if (res[0]=="true"&&res[1]=="true") {
				$form.prepend(
					'<input type="hidden" name="tToken" value="'+res[2]+'"/>'
					+'<input type="hidden" name="authToken" value="'+res[3]+'"/>'
				);
				$elem.before( eve.encloseErr("[--Password is being encrypted.--]") );
				setTimeout(function() {
					$form.find(".user-pwd")[0].value=eve.encrypt(res[3], userPwd, eve.iterFull); userPwd="";
					$form.find(".user-pwd")[1].value="confirmed"; userPwdCfm="";
					$elem.before( eve.encloseErr("[--Signing up--] : [--Please wait.--]") );
					$form.submit();
				}, 500);
			} else {
				var errStr="";
				if (res[0]=="false") {
					errStr+="[--ID--] '"+userId+"' [--is already in use. Please try another ID.--]<br>";
				}
				if (res[1]=="false") {
					errStr+="[--E-mail--] '"+userEmail+"' [--is already registered. Please try another e-mail.--]<br>";
				}
				$elem.before( eve.encloseErr(errStr) );
				$elem[0].disabled=false;
			}
		});
	} else {
		$elem.before( eve.encloseErr(err) );
		$elem[0].disabled=false;
	}
	var errorMsgs=$form.find(".error-msg");
	for (var i=errorMsgs.length-6;i>=0;i--) {
		errorMsgs.eq(i).css({display:"none"});
	}
};

$("#log-in-userPwd").on("keyup", function(e) {
	if (e.keyCode===13) { // Enter
		$("#button-log-in").trigger("click");
	}
});
$("#sign-up-userPwdCfm").on("keyup", function(e) {
	if (e.keyCode===13) { // Enter
		$("#button-sign-up").trigger("click");
	}
});
$("input.go-next").on("keyup", function(e) {
	if (e.keyCode===13) { // Enter
		$(this).next().next("input").focus();
	}
});
})(window.eve=window.eve||{}, jQuery);
</script>
</body>
</html>